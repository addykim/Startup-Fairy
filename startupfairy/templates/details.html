{% extends "base.html" %}
{% set active_page = category %}
{% block content %}
  <div class="col-md-8 col-md-offset-2">
    <div class="photo-right">
      {% if data.image %}
        <img src="{{ data.image }}" class="user-photo"/>
      {% endif %}
    </div>
    <div>
      {% if data.name %}
        <h1>{{ data.name }}</h1>
      {% endif %}
      {% if data.city %}<p><i>{{ data.city }}</i></p>{% endif %}
      {% if data.website %}<a href="{{ data.website }}">{{ data.website }}</a>{% endif %}
      {% if data.summary %}<p>{{ data.summary }}</p>{% endif %}
      <script text="text/babel">

        // TODO if companies need to parse the string first/replace first few characters
      </script>
      {% if data.companies %}<p>Companies:</p>
        <script type="text/babel">
          var companies = JSON.parse({{data.companies|tojson}});

          var CompaniesList = React.createClass({
            render: function() {
              var listItems = [];
              for (var i = 0; i < companies.length; i++) {
                // TODO use a proper url
                var url = "" + companies[i][1];
                listItems.push(<li key={companies[i][0]}><a href={url}>{companies[i][0]}</a></li>);
              }
              return <ul>{listItems}</ul>
            }
          });

          ReactDOM.render(
            <CompaniesList data={companies} />,
            document.getElementById('companies-list')
          );
        </script>
        <div id="companies-list"></div>
      {% endif %}
      {% if data.company %}
        <p>Companies:
          <ul>  
          {% for company in data.company %}
              <li>{{ company }}</li>
          {% endfor %}
          </ul>
        </p>{% endif %}
      {% if data.companies_invested %}
        <p>Companies Invested: 
          <ul>  
          {% for company in data.companies_invested %}
              <li>{{ company }}</li>
          {% endfor %}
          </ul>
        </p>{% endif %}
      {% if data.investors %}
        <p>Investors:</p>
        <ul>
          {% for investor in data.investors %}
            <li>{{ investor }}</li>
          {% endfor %}
        </ul>
      {% endif %}
      {% if data.financial_orgs %}
        <p>Investors: </p>
          {% for investor in financial_orgs %}
            <li>{{ investor }}</li>
          {% endfor %}
      {% endif %}
    </div>
  {% if data.twitter %}
    <a class="twitter-timeline" href="https://twitter.com/{{data.twitter}}">Tweets by {{data.twitter}}</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
  {% endif %}
  </div>
{% endblock %}